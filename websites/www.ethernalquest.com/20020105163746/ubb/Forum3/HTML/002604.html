<HTML><HEAD><TITLE>Compiling QT-2.3.2 with gcc3 (a guide) - HackersQuest Discussion Board</title><META HTTP-EQUIV="Pragma" CONTENT="no-cache">

</head>
<BODY bgcolor="#000000"   text="#ffffff" link="#00ff00" alink="#00ff00" vlink="#00ff00" marginheight=0 marginwidth=0 topmargin=0 leftmargin=0 rightmargin=0>

<FONT SIZE="2" FACE="Verdana, Arial"><center>
<table border=0 width=95%><TR>
<td valign=top align=left><A HREF="http://www.ethernalquest.com/cgi-bin/Ultimate.cgi?action=intro&BypassCookie=true"><IMG SRC="http://www.ethernalquest.com/ubb/../images/hq-title-shock.gif" BORDER=0></A>

</td>
<td valign=top NOWRAP>
<FONT SIZE="1" FACE="Verdana, Arial">
<IMG SRC="http://www.ethernalquest.com/ubb/open.gif"  BORDER=0>&nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/Ultimate.cgi?action=intro&BypassCookie=true">HackersQuest Discussion Board</A>
<br><IMG SRC="http://www.ethernalquest.com/ubb/tline.gif" BORDER=0><IMG SRC="http://www.ethernalquest.com/ubb/open.gif"  BORDER=0>&nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/forumdisplay.cgi?action=topics&forum=ShowEQ&number=3">ShowEQ</A>
<br>
<IMG SRC="http://www.ethernalquest.com/ubb/tline3.gif" BORDER=0><IMG SRC="http://www.ethernalquest.com/ubb/open.gif" BORDER=0>&nbsp;&nbsp;Compiling QT-2.3.2 with gcc3 (a guide) 
<center>
<P><FONT SIZE="2" FACE="Verdana, Arial">
<A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=newtopic&number=3&forum=ShowEQ"><IMG SRC="http://www.ethernalquest.com/ubb/hq-post.jpg"  BORDER=0 ALT="Post New Topic"></A>&nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=reply&forum=ShowEQ&number=3&topic=002604.cgi&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)"><IMG SRC="http://www.ethernalquest.com/ubb/hq-reply.jpg" BORDER=0 ALT="Post A Reply"></A></FONT>
<BR>
<A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=editbio&Browser=&DaysPrune=&LastLogin="><ACRONYM TITLE="Click here to edit your profile.">profile</ACRONYM></A> | <A HREF="http://www.ethernalquest.com/cgi-bin/Ultimate.cgi?action=agree"><ACRONYM TITLE="Registration is free!">register</ACRONYM></A> | <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=setprefs"><ACRONYM TITLE="Set your preferences.">preferences</ACRONYM></A> | <A HREF="http://www.ethernalquest.com/ubb/faq.html" target=_blank><ACRONYM TITLE="Frequently Asked Questions">faq</ACRONYM></A> | <A HREF="http://www.ethernalquest.com/cgi-bin/search.cgi?action=intro&default=3"><ACRONYM TITLE="Perform a search by keyword, date, or name.">search</ACRONYM></A>
</font>
</center>
</td></tr>
</table>
<table border=0 width=95%>
<tr><TD valign=bottom align=left><FONT SIZE="1" FACE="Verdana, Arial"><IMG SRC="http://www.ethernalquest.com/ubb/ubbfriendminiicon.gif" BORDER=0> <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=sendthread&thread=http://www.ethernalquest.com/ubb/Forum3/HTML/002604.html&Subject=Compiling+QT-2.3.2+with+gcc3+(a+guide)">UBBFriend: Email This Page to Someone!</A>   </font></TD>
<TD align=right  valign=bottom><FONT SIZE="1" FACE="Verdana, Arial">
<A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=findthread&forum=Forum3&number=3&thisthread=002604&go=newer"><ACRONYM TITLE="Go to the next newest topic in this forum.">next newest topic</ACRONYM></A> | <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=findthread&forum=Forum3&number=3&thisthread=002604&go=older"><ACRONYM TITLE="Go to the next oldest topic in this forum.">next oldest topic</ACRONYM></A></font>
</TD></tr></table>


<table width=95% border=0 cellspacing=1 cellpadding=4>
<TR bgcolor="#000000">
<TD valign=middle width=18%>
<FONT SIZE="1" face="Verdana, Arial" color="#00ff00"><B>Author</B></FONT>
</TD>
<TD valign=middle>
<FONT SIZE="1" face="Verdana, Arial" color="#00ff00"><B>Topic:&nbsp;&nbsp; Compiling QT-2.3.2 with gcc3 (a guide)</B></FONT>
</TD>
</TR><tr bgcolor="#1f1f1f">
	<TD width=18% valign=top>
	<FONT SIZE="2" face="Verdana, Arial"><B>fryfrog</B></font><BR><FONT SIZE="1" face="Verdana, Arial">Zombie </FONT>
</td>
<TD>
<IMG SRC="http://www.ethernalquest.com/ubb/icons/icon1.gif" BORDER=0 ALIGN=ABSCENTER>
<FONT SIZE="2" FACE="Verdana, Arial">
<FONT SIZE="1" color="#32cd32" face="Verdana, Arial">posted 12-19-2001 04:14 PM &nbsp;&nbsp;&nbsp;
<A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=getbio&UserName=fryfrog" target=_blank>
<IMG SRC="http://www.ethernalquest.com/ubb/profile.gif" BORDER=0 ALT="Click Here to See the Profile for fryfrog"></A> &nbsp; &nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=editpost&forum=ShowEQ&number=3&topic=002604.cgi&ReplyNum=000000&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)"><IMG SRC="http://www.ethernalquest.com/ubb/edit.gif"  BORDER=0 ALT="Edit/Delete Message"></A> 
</FONT><HR>i just got finished compiling qt-2.3.2 using gcc3 with the help of fee and and a few others from #showeq and thought i would post how we did it on the forums, in case someone else needed help.  for me, the hard part wasn't compiling it... it was getting it to use gcc3 instead of 2.96.  this is all on redhat 7.2, so if you use a different version/distro... this might not work for you.<P>start off by downloading the qt-2.3.2 source (maybe you want to grab 3.0.1 while you are there too).  you can get it at ftp.trolltech.com (in /qt/source/qt-x11-2.3.2.tar.gz).<P>next step is to extract this, using "tar zxvf qt-x11-2.3.2.tar.gz".  you can then move the dir where ever you want.  i use /lib/qt-2.3.2 since that is where redhat put qt-2.3.1.  i also keep qt-3.0.1 there.  once it is there, edit the file "./configs/linux-g++-shared" and change all references to "gcc" and "g++" to "gcc3" and "g++3" respectivly.  this assumes you HAVE the gcc3 and g++3 rpms installed (i think it is a default on rh 7.2)<P>the lines are:<BR>line 3:  "SYSCONF_CXX = g++3"<BR>line 4:  "SYSCONF_CC = gcc3"<BR>line 35:  "SYSCONF_LINK = g++3"<P>once you have done this, you will need to "export QTDIR=/path/to/qt-2.3.2" and then run "./configure -thread".  this should run through for a little bit, asking you to type "yes" at the beginning.<P>now comes the compile.  i would recommend doing this in a screen because it WILL take 2+ hours and if you are doing it from telnet/ssh and your connection goofs, it will cancel your compile.  you can use "make -j3" if you have a dual cpu system, and halve compile times.<P>once you have compiled QT-2.3.2, you might consider adding it to your /etc/ld.so.conf (/usr/lib/qt-2.3.2/lib is my entry) then running "ldconfig"<P>this (i think) should get your qt-2.3.2 compiled with gcc3, which gets you half way ready for the battle.  to compile apps with gcc3 that use qt, you need to compile anything it uses with gcc3 as well (hence compiling qt-2.3.2 with gcc3).<P>another trick for getting gcc3 to be used can be to use "export CC=gcc3" and "export CXX=g++3"</FONT><P align=right><FONT SIZE="1" color="#32cd32" face="Verdana, Arial">IP: <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=getip&number=3&topic=002604.cgi&ReplyNum=000000&forum=ShowEQ&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)">Logged</A></font></P></td></tr><tr bgcolor="#1f1f1f">
	<TD width=18% valign=top>
	<FONT SIZE="2" face="Verdana, Arial"><B>ThePowerTool</B></font><BR><FONT SIZE="1" face="Verdana, Arial">Zombie </FONT>
</td>
<TD>
<IMG SRC="http://www.ethernalquest.com/ubb/icons/icon1.gif" BORDER=0 ALIGN=ABSCENTER>
<FONT SIZE="2" FACE="Verdana, Arial">
<FONT SIZE="1" color="#32cd32" face="Verdana, Arial">posted 12-19-2001 05:01 PM &nbsp;&nbsp;&nbsp;
<A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=getbio&UserName=ThePowerTool" target=_blank>
<IMG SRC="http://www.ethernalquest.com/ubb/profile.gif" BORDER=0 ALT="Click Here to See the Profile for ThePowerTool"></A> &nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/Ultimate.cgi?action=email&ToWhom=ThePowerTool" target=_blank><IMG SRC="http://www.ethernalquest.com/ubb/email.gif" BORDER=0 ALT="Click Here to Email ThePowerTool"></A>&nbsp;&nbsp; &nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=editpost&forum=ShowEQ&number=3&topic=002604.cgi&ReplyNum=000001&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)"><IMG SRC="http://www.ethernalquest.com/ubb/edit.gif"  BORDER=0 ALT="Edit/Delete Message"></A> 
</FONT><HR>fryfrog,<P>Great post!  Thanks for the info.  I have one question and one comment.<P>Comment:  You mentioned 'make -j3' to halve compile times on dual processors.  Using make -j[x] allows you to specify x number of jobs that can run simultaneously.  This is actually a function of memory and I'm not sure about the dual-processor variable.  I have a dual processor system with 128 and usually limit my simultaneous jobs to 17.  There's a great reference available at -<P>http://www.frankenlinux.com/guides/tweaks.html<P>under the section "Compiler Speed-up."  This section was written with compiling the kernel in mind, but applies to make.<P>I'm hoping this will help you and others get better performance out of your makes in the future  <IMG SRC="http://www.ethernalquest.com/ubb/smile.gif"><P>Question:  I just compiled QT 2.3.2 (perhaps two weeks ago) on Mandrake 8.1 with gcc 2.96-0.62.  It will probably be a while until I upgrade again unless the pre-reqs for SEQ change.  Can you comment on any benefits of compiling with gcc3?<P>Thanks!<P></FONT><P align=right><FONT SIZE="1" color="#32cd32" face="Verdana, Arial">IP: <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=getip&number=3&topic=002604.cgi&ReplyNum=000001&forum=ShowEQ&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)">Logged</A></font></P></td></tr><tr bgcolor="#1f1f1f">
	<TD width=18% valign=top>
	<FONT SIZE="2" face="Verdana, Arial"><B>fryfrog</B></font><BR><FONT SIZE="1" face="Verdana, Arial">Zombie </FONT>
</td>
<TD>
<IMG SRC="http://www.ethernalquest.com/ubb/icons/icon1.gif" BORDER=0 ALIGN=ABSCENTER>
<FONT SIZE="2" FACE="Verdana, Arial">
<FONT SIZE="1" color="#32cd32" face="Verdana, Arial">posted 12-19-2001 05:13 PM &nbsp;&nbsp;&nbsp;
<A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=getbio&UserName=fryfrog" target=_blank>
<IMG SRC="http://www.ethernalquest.com/ubb/profile.gif" BORDER=0 ALT="Click Here to See the Profile for fryfrog"></A> &nbsp; &nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=editpost&forum=ShowEQ&number=3&topic=002604.cgi&ReplyNum=000002&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)"><IMG SRC="http://www.ethernalquest.com/ubb/edit.gif"  BORDER=0 ALT="Edit/Delete Message"></A> 
</FONT><HR>a.) from what i read about the -j option was that it specified how many threads would be created by the make program.  while i'm sure it does depend on memory, the biggest issue is going to be getting the thread some cpu time.  in theory, 2 threads would be fastest (1 for each cpu) but it turns out 3 is better.  this is because if 1 thread needs to lay dormant for a bit, for some reason... the 3rd thread will pick up and take the cpu time left over.<P>i did test this.  make -j2 was roughly 2x faster than make on my dual cpu box.  make -j3 actually shaved a few more seconds (but not really much) off of make -j2's time.  i tried more, but the returns were signifigantly reduced past -j(CPU+1)<P>as for compiling qt-2.3.2 using gcc3... i've heard that a program that might be coming out soon uses gcc3... and for you to compile it with gcc3, you will have to have qt compiled with gcc3 as well :)</FONT><P align=right><FONT SIZE="1" color="#32cd32" face="Verdana, Arial">IP: <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=getip&number=3&topic=002604.cgi&ReplyNum=000002&forum=ShowEQ&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)">Logged</A></font></P></td></tr></table><table border=0 width="95%"><TR><TD valign=top align=left><FONT SIZE="1" FACE="Verdana, Arial"><P>All times are ET (US)</FONT></td><td align=right valign=top><FONT SIZE="1" FACE="Verdana, Arial"><A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=findthread&forum=Forum3&number=3&thisthread=002604&go=newer"><ACRONYM TITLE="Go to the next newest topic.">next newest topic</ACRONYM></A> | <A HREF="http://www.ethernalquest.com/cgi-bin/ubbmisc.cgi?action=findthread&forum=Forum3&number=3&thisthread=002604&go=older"><ACRONYM TITLE="Go to the next oldest topic.">next oldest topic</ACRONYM></A></font></td></tr>
<tr><td colspan=2><FONT SIZE="1" FACE="Verdana, Arial"><BR><CENTER><B>Administrative Options: <A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=closethread&topic=002604.cgi&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)&number=3&forum=ShowEQ">Close Topic</A> | <A HREF="http://www.ethernalquest.com/cgi-bin/archive.cgi?action=transfer&topic=002604.cgi&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)&number=3&forum=ShowEQ">Archive/Move</A> | <A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=deletepost&forum=ShowEQ&number=3&topic=002604.cgi&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)">Delete Topic</A></B></font></center></td></tr>
<TR><TD><A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=newtopic&number=3&forum=ShowEQ"><IMG SRC="http://www.ethernalquest.com/ubb/hq-post.jpg"  BORDER=0 ALT="Post New Topic"></A>&nbsp;&nbsp;<A HREF="http://www.ethernalquest.com/cgi-bin/postings.cgi?action=reply&forum=ShowEQ&number=3&topic=002604.cgi&TopicSubject=Compiling+QT-2.3.2+with+gcc3+(a+guide)"><IMG SRC="http://www.ethernalquest.com/ubb/hq-reply.jpg" BORDER=0 ALT="Post A Reply"></A></CENTER></TD>
<td align=right valign=top NOWRAP>
<FONT SIZE="2" FACE="Verdana, Arial">
<FORM ACTION="http://www.ethernalquest.com/cgi-bin/forumdisplay.cgi" METHOD="GET">
<INPUT TYPE="HIDDEN" NAME="action" VALUE="topics">
<B>Hop to: </B><SELECT NAME="number"><OPTION value="">Select a Forum or Archive
<OPTION value="">
<OPTION value="">List of Forums:
<OPTION value=""><OPTION value="1">HackersQuest Main Forum<OPTION value="2">EthernalQuest<OPTION value="3" SELECTED>ShowEQ<OPTION value="4">ShowEQ Linux Development<OPTION value="6">EthernalQuest Bugs<OPTION value="7">Emulator Scripting<OPTION value="8">Other Games<OPTION value="9">Anarchy Online<OPTION value="10">Hex Editing<OPTION value="11">Dark Age of Camelot<OPTION value="">
<OPTION value="">List of Archives:
<OPTION value=""></SELECT>
<INPUT TYPE="SUBMIT" NAME="SUBMIT" VALUE="Go">
</FORM></FONT></TD></tr></TABLE>
<br><B><FONT SIZE="2" FACE="Verdana, Arial">
<A HREF="mailto:ashran@ethernalquest.com">Contact Us</A> | <A HREF="http://hackersquest.gomp.ch" target=_top>HackersQuest</A> 
</B></FONT>
<p><FONT COLOR="#dedfdf" size="1" FACE="Verdana, Arial">
<P>

<a href="http://infopop.com"><IMG SRC="http://www.ethernalquest.com/ubb/powered_by2.gif" border=0></a><br>
Ultimate Bulletin Board 5.47<br><br>

</FONT></CENTER></font><center>
<IFRAME WIDTH=468 HEIGHT=60 NORESIZE SCROLLING=No FRAMEBORDER=0
MARGINHEIGHT=0 MARGINWIDTH=0 NAME="Werbung"
SRC="http://data.gomp.net/werbung.htm">
 <!-- Werbebanner von Krawall.de -->

 <SCRIPT LANGUAGE="JavaScript"> <!--
_version=10; //--> </script>
<SCRIPT LANGUAGE="JavaScript1.1"> <!--
_version=11;
if (navigator.userAgent.indexOf('Mozilla/3') != -1){
_version=10;} // --> </script>
<SCRIPT LANGUAGE="JavaScript"> <!--
var server = 'oas.krawall.de';
var sitepage = "www.gomp.ch/homepage";
var position ="Top!Top";
if (! (RN)) {
var RN = new String (Math.random());
var RNS = RN.substring (2, 11);
}
var oas='http://' + server + '/RealMedia/ads/';
var oaspage= sitepage + '/1' + RNS + '@' + position;
if (_version < 11) {
  document.write ('<A HREF="' + oas + 'click_nx.ads/'+ oaspage + '"
TARGET="_blank" ><IMG SRC="' + oas + 'adstream_nx.ads/' + oaspage + '"
BORDER="0"  WIDTH="468" HEIGHT="60"  ALT="Hier klicken!" ></a>');
} else {
  document.write ('<SCRIPT LANGUAGE="JavaScript1.1" SRC="' + oas +
'adstream_jx.ads/' + oaspage + '">');
  document.write ('\<\!-- --\>');
  document.write ('\<\/SCRIPT\>');
  document.write ('\<\!-- --\>');
}
// -->
</SCRIPT>

</IFRAME></enter></body></html>