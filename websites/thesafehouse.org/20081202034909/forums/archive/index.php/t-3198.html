<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name="keywords" content=" How do you get merchants to work?, Rogue, Everquest, World of Warcraft, Vanguard, MMORPG, Roleplaying, Thief, Pirate, computer games, PC games, Pen & Paper, Sigil, SOE, EQ2, EQ, DAoC" />
	<meta name="description" content="[Archive]  How do you get merchants to work? Neverwinter Nights" />
	
	<title> How do you get merchants to work? [Archive]  - The Safehouse Forums</title>
	<link rel="stylesheet" type="text/css" href="http://www.thesafehouse.org/forums//archive/archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="http://www.thesafehouse.org/forums//archive/index.php">The Safehouse Forums</a> &gt; <a href="http://www.thesafehouse.org/forums//archive/index.php/f-6.html">The Archives</a> &gt; <a href="http://www.thesafehouse.org/forums//archive/index.php/f-21.html">Neverwinter Nights</a> &gt;  How do you get merchants to work?</div>
<hr />
<div class="pda"><a href="http://www.thesafehouse.org/forums//archive/index.php/t-3198.html?pda=1" rel="nofollow">PDA</a></div>
<p class="largefont">View Full Version : <a href="http://www.thesafehouse.org/forums//showthread.php?t=3198">How do you get merchants to work?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-24-02, 08:24 AM</div></div><div class="posttext">I picked up the book that shows you how to build worlds, but I can't find any reference to making merchants in there.<br />
<br />
Every time I place a merchant under the merchant's option it just places a flag that doesn't show when playing the game. When I flag a npc to open store on conversation it says &quot;this is what would happen if the store had opened&quot; when I talk to them. It's driving me insane!<br />
<br />
can anyone help? I admit I never learned C (yeah I know I'm a yuts) so scripting is amking me pull my hair out. __________________________________________________ __________<br />
Yes this is Kroe Magnon, I'm sick of switching accounts for each board. ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">06-24-02, 11:31 AM</div></div><div class="posttext">I'll try to help you out.  Here goes...<br />
<br />
First you make your merchant, setup it's inventory, sell markup, buy markdown and decide if it deals in stolen goods.<br />
<br />
Then assign a Tag to it (on the Basic tab) say 'WeaponSmith' is it's tag.<br />
<br />
You don't need anything else in the Advanced or Comments tabs for the merchant.<br />
<br />
Paint your merchant down somewhere near where the NPC will be.<br />
<br />
Now make a new monster say a Halfling Male, set it up however you wish.  We'll call him Bob the Weaponsmith (Bob for short).<br />
<br />
I put mine on Faction 'Merchant' (Advanced tab) but I don't think the faction matters as long as he's not hostile.<br />
<br />
Now Edit his conversation (Basic Tab) when you get to the bit that the PC says to open the shop after typing in the PC text highlite that line of text then click the 'Actions Taken' tab.<br />
<br />
On the actions taken tab you can pick a script, edit, or use the wizard.  I used the wizard.<br />
<br />
Wizard Step 1: click 'Perform an Action' then Next<br />
Wizard Step 2: click 'Start a Merchant' and in the 'Script Tag' box put in the tag you gave your merchant object earlier. 'WeaponSmith' (note it's case sensitive).<br />
<br />
Wizard Step 3: you can give the script another name I don't bother then click Finish.<br />
<br />
Now finish up your conversation save it etc.<br />
<br />
Now paint your NPC down near where you put the merchant object (the flag thing).<br />
<br />
Now test it out it should all work.  The main thing to remember is that you have to have the same tag in the 'StartMerchant' conversation script (from the wizard) and on your merchant object (the flag thingy).<br />
<br />
Hope that helped and wasn't too convoluted.<br />
illitrit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-25-02, 09:52 AM</div></div><div class="posttext">thanks so much. Annoyed me that I bought a $20 guide book on world building and they didn't mention it anywhere in there. merchants are kind of useful in game worlds don't you think?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">06-25-02, 11:13 AM</div></div><div class="posttext">I bought the guide book hoping it'd have a breakdown of what each function does, no luck.  Since then I've been writing scripts just to see what I can do and haven't had too too many problems so the book is kindling if I ever get a fireplace.<br />
<br />
On that note if you or anyone needs a hand with a script and just can't figure it out I'd be more than happy to try and help out.<br />
<br />
illitrit<br />
Ander Steel (11 Rogue NWN SP Campaign)</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-25-02, 01:33 PM</div></div><div class="posttext">thanks I suspect you'll see me posting all kinds fo questions as time goes by hehehe</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_ZanthiatheNightshade</div><div class="date">06-26-02, 12:16 AM</div></div><div class="posttext">I haven't ourchased the book... what does it have in it if not detailed info on how the scripts work</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">06-26-02, 06:41 AM</div></div><div class="posttext">It has a walkthrough on howto setup a complete mini-module and some examples of howto do scripts (bad, poorly explained examples IMHO), a primer on basic C programming concepts (loops, variables, etc) and a list of all the critters that come with the game (game stats, etc).<br />
<br />
It's not a waste of money but it's not what  I was looking for.<br />
<br />
illitrit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-26-02, 09:51 AM</div></div><div class="posttext">yeah it has a little useful stuff but not really what I wanted from it. <br />
<br />
Next question time! how od you make an NPC become your Henchman? I found the part of the book that explains henchmen scripting but not how to make someone your henchman. Nodwick eludes me still!</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">06-26-02, 10:50 AM</div></div><div class="posttext">hehe that's a good question I'll let you know if I get one working that's the next step after I finish my sexah bar employees that wander table to table in my bar and offer folks drinks unless the folks ask not to be bothered (sorta like a real life waiter(ess).<br />
<br />
I'll probably be working on that soon just want to flesh out my bartender conversations and make them actually sell booze (as conversation options not as merchants)<br />
<br />
illitrit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-26-02, 11:44 AM</div></div><div class="posttext">at least I know I'm not the only one with this problem than hehe.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">06-27-02, 12:09 AM</div></div><div class="posttext">Ok I got a henchman to join a player.  It was pretty simple but he's very basic (i.e. not changing tactics etc .. yet).  I looked at Tomi Undergallows from Chapter 1 and basically copied what scripts he was using in his scripts tab.  And made a conversation to actually 'hire' him.<br />
<br />
Ok first the conversation:<br />
<br />
On the line where the PC says 'yeah they want the henchman' put this in the ActionsTaken tab:<br />
<br />
void main()<br />
{<br />
    AddHenchman(GetPCSpeaker(), OBJECT_SELF);<br />
}<br />
<br />
You can do other things and probably should but this is VERY rudimentary.  I suspect with just this you'd come into players being able to hire multiple henchmen if you don't check for that and other fun stuff.<br />
<br />
In the Scripts tab for your henchman put these scripts in from top down...<br />
<br />
nw_ch_ace<br />
nw_ch_ac3<br />
nw_ch_ac4<br />
nw_ch_ac6<br />
nw_ch_ac7<br />
nw_ch_ac8<br />
nw_ch_ac1<br />
nw_ch_ac2<br />
nw_ch_ac5<br />
nw_ch_aca<br />
nw_ch_ac9<br />
nw_ch_acb<br />
nw_ch_acd<br />
<br />
I didn't look at what exactly these do yet, but I intend to eventually.<br />
<br />
Again, this is VERY rudimentary and quite flawed, but when I hired my little gnome wizard and then went against some critters he did in fact use his spells then move in to melee (which really isn't wise for a wizard but hey he's a gnome).<br />
<br />
 /em hides from Glip and the rest of the gnome resistance<br />
<br />
Hope it helps, I'll post more as I discover it.<br />
illitrit<br />
<br />
Also for anyone interested in seeing what strange things I've done I setup a MP server when I'm doing work during the day anyone from here is welcome to snoop around and if they see me in there (Ander Steel normally) say hi and ask how I did any particular thing.  Also to the developers of the official safehouse server if you would like any assistance with it especially in the scripting department give me a yell I'd be happy to help.<br />
<br />
Server: 68.34.51.168:5121<br />
Type: Role-Play<br />
Password: Safehouse<br />
Server Name: A bar of sorts<br />
max players: 16<br />
<br />
 Edited by: illitrit  at: 6/27/02 2:28:40 am</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-27-02, 09:07 AM</div></div><div class="posttext">thanks again illitrit I'll drop the script in when I get home tonight. <br />
<br />
How late will your server be up? I may be out of work early today for a change so I will have to pop in and explore.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">06-27-02, 11:11 AM</div></div><div class="posttext">I'm not sure how long or when it'll be up at any given time but if you want to check it out drop me an ICQ (30779889) or MSN (illitrit@hotmail.com) and if ya see me I can bring it up :)<br />
<br />
I keep forgetting to play the single player campaign because I get caught up in playing with the toolset :)<br />
<br />
illitrit</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_kiyotee</div><div class="date">06-27-02, 11:14 AM</div></div><div class="posttext">hehe same here ill, I got as far as someone attacking the acadamy thing before I ewnt off and decided tinkering is more fun.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kroe</div><div class="date">07-03-02, 09:08 AM</div></div><div class="posttext">ok next question, how did you get the potions of lyconthropy to work? I can't seem to figure out how you did it! 1 Crow bad news<br />
2 Crows myrth<br />
3 Crows a wedding<br />
4 Crows a birth<br />
5 Crows for riches<br />
6 Crows a thief</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">07-03-02, 09:48 AM</div></div><div class="posttext">The potions themselves are applied in the 'activate' event for the module because they use the effect of 'Unique Power self only' (though I suppose you could do it for just one area too).  Basically all they do is set a couple of localints on the player.  **See note below about potions<br />
<br />
The shapechange at night and morning is applied via the onheartbeat scripts for the module (again area would work too I'm sure).<br />
<br />
If knowing where the scripts occur isn't enough just lemme know :)<br />
<br />
I can put up the latest copy of the module if you want Kroe, it's now about 2.5MB and includes a bunch of merchants, a PvP arena (which announces when players enter and leave to it's current occupants), a Level fairy (she power levels the player 1 level at a time giving gold and xp, I did not write this script but it works nicely), an incinerator (an object you put items in and when you close it the firebreathing penguin named Fluffy comes over and flames it, destroying the objects you placed in it), useable chairs, and a few other odds and ends.<br />
<br />
** Note on custom potions: Currently for custom potions the do NOT work if the PC only has 1 in his stack because the potion object is destroyed before the 'onactivate' script can grab the name and apply the effects, however if the PC has 2+ in the stack it works fine ... so a stack of 10 gives the PC 9 uses.  Bioware is aware of this but I dunno if there's plans to fix it.<br />
<br />
illitrit<br />
<br />
My little bar/arena module is up for public use sometimes as the following...<br />
Category: Role Play<br />
Name: A Bar w/ PvP Arena and shops<br />
normally no password</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kroe</div><div class="date">07-03-02, 09:51 AM</div></div><div class="posttext">yeah please do put it up. I tried getting the file last time, but it kept erroring and saying it wasn't there.    how did you make people sit in chairs anyway? was tinkering with the on use command on the chairs and haven't gotten it yet.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">07-03-02, 12:04 PM</div></div><div class="posttext">The latest version as of now can be found at illitrit.die.org/nwn/  it has been renamed to Bar-n-Arena.mod so as not to offend the official Safehouse mod makers.<br />
<br />
illitrit<br />
<br />
edit: fixed link, for real this time. Edited by: illitrit  at: 7/3/02 1:06:14 pm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">braincandy99</div><div class="date">07-03-02, 12:08 PM</div></div><div class="posttext">FYI, Winzip compresses the .MOD files very nicely</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_illitrit</div><div class="date">07-03-02, 01:28 PM</div></div><div class="posttext">hehe oops<br />
<br />
I forget these things on small files ever since I got cable internet.  I'll zip it up and upload it :)<br />
<br />
illitrit<br />
<br />
Edit: hah from 2.6Mb to 479kb :) Edited by: illitrit  at: 7/3/02 2:31:42 pm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kroe</div><div class="date">07-03-02, 01:49 PM</div></div><div class="posttext">wow that's alot easier hehe I'll try to download it when I get out of work tonight. thanks Illitrit.</div></div><hr />



</div>
</body>
</html>